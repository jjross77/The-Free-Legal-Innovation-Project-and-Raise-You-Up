# -*- coding: utf-8 -*-
"""
Created on Sat Jul  1 23:20:45 2023

@author: yyyyyyyyyyyyyyyyyyyy
"""
import os
import re
import time
import torch
os.chdir(r"C:\Users\yyyyyyyyyyyyyyyyyyyy\Documents\Kimlichcova")
from pipe_line_to_process_documents2 import document_vectorizer

text="""

RE ANVIL MINING CORP. LTD. AND UNITED STEELWORKERS, LOCAL 1051 AWARD The union brings this grievance to arbitration under the terms of the collective agreement (ex. 1), dated October 1, 1972. The arbitra­tion procedure is set out in art. 17. Both parties agreed that the board was properly constituted and that the board had jurisdiction to hear the matter. The parties agreed to allow the board to pose the question to be answered. While the grievance filed January 9, 1975, had been styled as a General Policy Grievance, the evidence and argument at the hear­ing took the form of an individual grievance seeking relief for an al­leged breach of the terms of the collective agreement. By the end of the hearing the point of contention thus became clear and the board poses the question as follows: 1. Was the grievor, Gerry Barkhouse, laid off on January 6 and 7, 1975, contrary to art. 8 of the collective agreement? 2. If the answer to question 1 is in the affirmative, what is the ap- propriate remedy? Statement of facts There is no dispute as to the relevant facts. During the first week of January, the weather conditions at Faro were very severe, with the temperature on January 6th to 8th, ranging from — 40 to - 60°F. At 5:45 a.m., January 6th, Faro suffered a complete power outage, which lasted until approximately 10:00 a.m. The 12 to 8 a.m. (grave-yard) shift remained on the premises until 8:00 a.m. although the equipment in the mine was not operative. The grievor, Gerry Bark- house who was employed as a driver of a wapco (120-ton) truck re­ported for work for his scheduled 8 to 4:00 oclock shift on January 6th, and was told by his foreman that there was no truck for him to drive as the shovel had broken down due to the weather conditions. 
He was told to go home at 12:30 p.m., after having spent four and one-half hours on the premises. On January 7th, the grievor again reported for his scheduled 8 to 4:00 oclock shift and again was sent home at 12:00 noon. On January 8th, the grievor reported for his 8 to 4:00 oclock shift and worked the entire shift, but not at his nor­mal job as wapco truck driver, although he was paid at his regular job classification rate. The company did not send any notices to the day shift employees in January 6th, 7th, 8th or 9th advising them that they were not to report for work. On January 6th, 7th, and 8th, when some employ­ees were sent home from the day shift, they received at least four hours reporting pay. The afternoon and graveyard shifts operated on a full employee compliment during this entire period, with the exception of January 7th, junior employees were sent home after four hours from the afternoon shift. No effort was made by the company to see what other jobs could be done by those employees sent home. Nor did the company check the seniority ratings of its employees in order to decide what em-ployees, with company-wide seniority should be given the opportu­nity to bump into other departments to displace juniors, until this was discussed at a meeting between union and company personnel on January 8th. At that meeting there is evidence to support the unions contention that a tentative agreement was reached concern­ing the meaning of art. 8 and the companys obligations thereunder. But this understanding was renounced by the company on Jan­uary 9th when it advised Local 1051 officials that in its view it had not breached art. 8 during the period of January 6th to 9th, by send­ing home employees according to their seniority within their job classification rather than company seniority. The grievor, Gerry Barkhouse then brought his grievance on Jan­uary 9th, alleging that he lost 7-1/2 hours pay January 6th and 7th as a result of an improper lay-off by the company in violation of art. 8. The relevant provisions in the collective agreement are: 5.01(j) An employee who reports for work on his regular shift and who was not told in advance not to report will be guaranteed four (4) hours work at his base rate. This shall not apply to an employee returning from an absence. 8.09(a) If a reduction in forces is required in any job classification, employees will first move down their line of progression. Before any layoffs occur, the em­ployees affected by the reduction in force may use their Company seniority to claim an entry level job in any other department. (b) Should layoffs become necessary, temporary employees shall be laid off first and then any other employees affected shall be laid off in the reverse order of their Company Seniority. 8.15 In the case of permanent lay-off or shut-down of the Companys opera­tions resulting in the termination of an employees employment, the Company will give fourteen (14) days notice or failing such notice pay in lieu thereof; and 
agrees to provide transportation for the employee and family to the point of hir-ing, but in no event beyond Edmonton or Vancouver. The union argument Counsel for the union advanced the proposition that the com-panys conduct on January 6th to 9th in sending home certain em­ployees including the grievor constituted reduction in forces or lay-off, thereby bringing into play the obligations set out in art. 8.09. With reference to the grievor, these provisions would place the company under the duty to allow the grievor to bump into other de­partments and displace employees with less company seniority. In particular, union counsel argued that art. 8.09 refers: (1) to a reduction not a general reduction; (2) such reduction of forces with no reference to any minimum amount of time or number of em­ployees that be involved; and (3) and it allows an employee to use his company-wide seniority to claim an entry level job in any other de-partment. In this case, according to the union, Gerry Barkhouse who had more company seniority than several of the dart truck drivers should have been allowed to bump into that department rather than be sent home on January 6th and 7th with only report-ing in pay. The company argument Counsel for the company argued that no lay-off or reduction of forces had occurred on the relevant dates, thus the seniority provi­sions contained in art. 8 did not come into effect. Thus the company had fulfilled its obligations under the collective agreement by pay­ing the employees their minimum reporting-in pay. In his view, any other interpretation of the agreement would amount to a guarantee of a 40-hour work-week for employees. Moreover, to require the company to observe seniority provisions in this type of situation would create an impossible burden for the company, especially in view of the unexpected nature of these shut-downs. Decision of the board The first issue that the board must decide is whether the com-panys conduct in sending home employees on January 6th, 7th, 8th constituted a lay-off. The collective agreement itself does not define layoff as reduction of forces. In the absence of such definition in the agreement we must rely on our understanding of the word in its ordinary meaning, together with the meaning that has been ascribed to the word by other arbitrators in analogous circum-stances. There is a long line of arbitration awards in which lay-off has been defined as, a period of being off. . . work. This defmition which appears in Websters Unabridged International Dictionary (2nd ed.), at p. 1403, was accepted by Mr. Justice Gale (as he then was) in Re U.E .W ., Local 527, and Peterboro Lock Mfg. Co. Ltd. 
(1953), 5 L.A.C. 1617. Likewise in Re Amalgamated Meat Cutters, Local 633, and Vaunclair Purveyors Ltd. (1963), 13 L.A.C. 369 (Arthurs), it was decided that a layoff must be regarded as any period during which employees are required to cease working and includes being sent home from work as little as fifteen minutes be­fore the end of a regular working period. In Re U.A.W., Locals 439, 458, 636 and Massey-Ferguson Ltd. (1960), 11 L.A.C. 33 (Lane), the Chairman stated that [at p. 37J: ... it would seem to us that a lay-off is complete when the company notifies a workman that he will not be required either for a definite period of time or for an indefinite period of time. In this instance, there was a notification of these six workmen at least that they would not be required for the second half of the shift. In our opinion, this constitutes a lay-off unless the parties had agreed to some other definition of lay-off which is in the agreement itself or which by implication of law can be read into the agreement. The view that a period off work is a lay-off although it is for less than one full shift was accepted in three instances by His Honour Judge E. W. Cross; see Re U.A.W., Local 112 and De Havilland Aircraft Ltd. (1957), 8 L.A.C. 55; Re U.A.W., Local 439 and Mas-sey-Ferguson Ltd. (1962), 12 L.A.C. 235, and Re Intl Assn. of Ma-chinists, Lodge 1246 and Franklin Mfg. Co. (Canada) Ltd. (1963), 13 L.A.C. 212. Likewise, in Re Intl Union of Electrical Workers, Local 510 and Phillips Cables Ltd. (1968), 19 L.A.C. 185 (Christie), the board decided at p. 189 that the normal meaning of the term lay-off is a period of being off work, including a period of less than one full shift. Thus, where lay-off is not defined in the collective agreement, the term should be understood according to its normal meaning which is a period of being off work. However, even where there is no definition of the term lay-off in the agreement, other provisions in the agreement may clarify the meaning of the term as it ought to be applied. Thus in Re Intl U.E.W., Local 526 and Automatic Electric (Canada) Ltd. (Brockville Plant), unreported (Anderson), the board accepted the proposition that unless a collective agreement expressly provides otherwise, a lay-off includes a period of less than a shift. Yet the learned Judge felt impelled by the reporting in provision to hold that the ordinary meaning that should be ascribed to lay-off was impliedly modified to exclude periods of less than a full shift. Likewise in Re United Glass & Ceramic Workers, Local 203 and Dominion Glass Co. Ltd. (1965), 16 L.A.C. 171 (Arrell), it was also decided that the reporting in provision would be ren­dered superfluous unless lay-off was given a restricted meaning. In our case, counsel for the company argued along a similar vein, that the report in provision (art. 5.01(j)) would be rendered mean­ingless if the company were required to pay for a full eight hours when it sent an employee home after four hours. Moreover, counsel contended that any other interpretation of the agreement would ef- 
fectively guarantee an employee of a minimum of 40 hours pay per week. With respect we cannot accept these arguments. As pointed out by Professor Christie in Phillips Cables, the col­lective agreement in Dominion Glass included a provision for tem­porary lay-off out of order of seniority and, except in case of emer­gency (which was not the case before the board), the employer was required to give written notice of lay-off at least five days in ad­vance of the effective date. It was this notice requirement which lead the majority of the Board to hold that lay-off could not in­clude periods of less than one shift without rendering the report-ing-in provision superfluous. In Phillips Cables, as in our case, the collective agreement contains no notice requirement analogous to the provision in Dominion Glass. The only notice requirement which the company in our case is obliged to follow in the case of a lay-off, is contained in art. 8.15 which refers to a permanent lay-off or shut-down of the companys operations, as contrasted with the agreement in Dominion Glass which required the employer to pro­vide one days notice or one days pay in the event of a lay-off of five working days or less. In our case, as in Phillips Cables, the notice requirements in art. 8.15 does not conflict with the reporting in provision in art. 5.01. Likewise, the ordinary meaning that must be ascribed to lay-off in art. 8.09 is not altered by art. 5.01(j), the reporting pay provision. We agree with the view taken in Phillips Cables [at pp. 190-191] (which was affirmed in Re Intl Woodworkers of America and Livingston Industries Ltd. (1972), 24 L.A.C. 44 (Shime)), that there is no conflict between a reporting-in provision and a seniority provision as they protect different employee inter-ests: The former ensures that any employee who travels from his home to the place of work will be paid a minimum of four hours, in compensation for his trouble and as an incentive for the company to contact him in advance if there is no work. The seniority provisions, of course, ensure that where the work force is reduced the most se­nior men are the last to lose the opportunity to earn wages. Thus, in our case, there is no inherent reason why seniority priority should be any less secure because the period of earning opportunity of the grievor, was reduced by only three and one-half and four hours on January 6th and 7th respectively. Counsel for the company also contended that when the company is faced with the type of emergency situation which was not of its own making as in the instant case, that to impose the obligation on the company to apply the seniority provisions in reducing the work force would be an impossible burden. He cited several Ontario arbi­tral awards, i.e., Re U.A.W., Local 397, and Canadian Trailmobile Ltd. (1972), 23 L.A.C. 384 (OShea); Re McCormicks Ltd. and American Federation of Grain Millers, Local 242 (1973), 3 L.A.C. 
(2d) 354 (Curtis), in support of the proposition that while sending home employees during a shift might be referred to as a lay-off, it cannot be properly characterized as a lay-off as contemplated by art. 8.09 of the collective agreement as applied to a unique factual situation as in the instant case. In his view, art. 8.09 was intended to provide for a method of orderly lay-off of employees in accordance with their seniority when the company plans a decrease in produc-tion. But in the instant case, no planned decrease in production was contemplated by the company but rather a simple reduction of forces brought about due to extremely cold weather conditions, ag­gravated by a power outage. In view of these facts, he urged that art. 8.09 could have no application. The board cannot agree. In each of the cases cited by counsel for the company, there was simply no work to be done by the grievors. In the instant case, there is no evidence that there was no work for the grievor. On the con-trary, the evidence shows that employees with less seniority than the grievor were driving dart trucks on January 6th and 7th. This job which the grievor had previously done, was of a lower job clas­sification than that regularly performed by the grievor. Yet no ef­fort was made by the company to allow the grievor to bump into this lower job classification and displace employees with less seniority. In our view, the company in sending the grievor home before the end of his shift, January 6th and 7th was laying him off within the meaning that must be ascribed to that term. As such, the company was under the obligation of following the provisions in art. 8 of the collective agreement. Unlike some contracts (e.g., as in Phillips Cables) there is no clause in the collective agreement which pro­vides that the company may schedule short term reductions in the working force without regard to seniority. No doubt, insisting on the detailed application of seniority provisions to short term reduc­tions might result in some additional restrictions on the company in its operations when events analogous to those on January 6th, 7th and 8th occur. But it must be assumed that the parties had this re­sult in mind when they negotiated the agreement. With respect to question 1, we answer in the affirmative. In our opinion, the grievor, who was laid-off out of seniority under the terms of art. 8.09, is justified in his grievance in this instance, and the grievance is allowed. With respect to question 2, we would, therefore, direct that he be compensated for his loss of work on Jan­uary 6th and 7th. 
 """
document_vectorizer=document_vectorizer()
text=document_vectorizer.pre_process_text(text)
text=document_vectorizer.divide_doc_into_sentences(text)
sentence_list=document_vectorizer.generate_contexualized_sentences(text)
for sentence in sentence_list:
    inputs=document_vectorizer.tokenize_document(sentence)
    #print(dog)
    #print(inputs[0])
    #print(time.time())
    embeddings=document_vectorizer.generate_embeddings(inputs[0])
    #print(time.time())
    #dogoo2=embeddings[1]
    
    #print(sentence[1])
    dogoo3=document_vectorizer.pos_data_creator(sentence[1])
    document_vectorizer.pos_matcher_and_uploader()
    #del embeddings
    del inputs # thsi is hte key to freeing up memeory wow
    torch.cuda.empty_cache() # this seems to be key as well
    
    

    
document_vectorizer.tokenize_document(sentence_list)
print(sentence_list)
find_word_pattern = re.compile(r"\w+")

words_remove_from_sentence = find_word_pattern.findall(sentence_list[100][0])
finding_words_to_remove_len =len(words_remove_from_sentence)
print(finding_words_to_remove_len)
# find the first instance of 2 alone so space2, then mark bascially that the rest of the embeddings are important and correspond to the 
#ignore all the zeroes and we need to  find all the words and there place that correspond to the given values we wnat



